Import('env')

module_env = env.Clone()

# Add your module's source files
module_env.add_source_files(env.modules_sources, [
    "register_types.cpp",
    "thirdparty/flecs/distr/flecs.c",
    "ecs/flecs_types/flecs_script_system.cpp",
    "ecs/systems/rendering/multimesh_render_system.cpp",
    "ecs/systems/rendering/occlusion/tile_occlusion_manager.cpp",
    "ecs/systems/rendering/occlusion/occlusion_system.cpp",
    "ecs/systems/pipeline_manager.cpp",
    "ecs/systems/rendering/render_system.cpp",
    "ecs/utility/navigation/2d/navigation2d_utility.cpp",
    "ecs/utility/navigation/3d/navigation3d_utility.cpp",
    "ecs/utility/physics/2d/physics2d_utility.cpp",
    "ecs/utility/physics/3d/physics3d_utility.cpp",
    "ecs/utility/rendering/2d/render_utility_2d.cpp",
    "ecs/utility/rendering/3d/render_utility_3d.cpp",
    "ecs/utility/scene_object_utility.cpp",
    "ecs/systems/demo/bad_apple_system.cpp",
    "ecs/flecs_types/flecs_server.cpp"
])

# Use env.GetModulePath() for the module's root, or env.Dir('.')
# Based on common Godot SCons practices, env.GetModulePath() is often available
# or directly using env.Dir('.') which refers to the current directory of the SCsub.

module_env.Append(CPPPATH=[
    # The current directory of this SCsub (i.e., godot_turbo/)
    env.Dir('.'), # This is the most robust and standard SCons way.

    # Specific third-party library relative to module root
    env.Dir('thirdparty/flecs/distr'),
    env.Dir('thirdparty/concurrentqueue/'),


    # Main ECS subdirectories relative to module root
    env.Dir('ecs'),
    env.Dir('ecs/flecs_types'),
    env.Dir('ecs/components'),
    env.Dir('ecs/utility'),

    # Specific sub-subdirectories (if your #includes are like #include "2d_physics_components.h")
    # env.Dir('ecs/components/rendering'),
    # env.Dir('ecs/components/physics/2d'),
    # env.Dir('ecs/components/physics/3d'),
    # env.Dir('ecs/components/navigation/2d'),
    # env.Dir('ecs/components/navigation/3d'),
    # env.Dir('ecs/utility/rendering'),
    # env.Dir('ecs/utility/physics/2d'),
    # env.Dir('ecs/utility/physics/3d'),
    # env.Dir('ecs/utility/navigation/2d'),
    # env.Dir('ecs/system/commands/'),
    # env.Dir('ecs/utility/navigation/3d'),
    # env.Dir('ecs/utility/navigation/3d'),
    # env.Dir('ecs/utility/navigation/3d'),

])

# Optional optimizations
# module_env.Append(CCFLAGS=["-O2"])